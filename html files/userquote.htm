<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="https://harish141103.github.io/Quotesite/css files/userquotes.css">
    <title>HappyHope UserQuotes</title>
</head>
<style>
  body{background-color: purple;color: white;}
#notes{
border-radius: 2em;
  background-color: gold;color:black;
  display:flex ;
justify-content: center;
}
#title{color:white}
.gradient-border{
        margin-bottom: 1em;
        /* height: 1em; */
        /* width:80%; */
      
        --angle: 0deg;
        width: fit-content;
        height: fit-content;
        border: 4px solid;
        border-image: conic-gradient(from var(--angle), red, yellow, lime, aqua, blue, magenta, red) 1;
        animation: 3s rotate linear infinite;
    }
    
    @keyframes rotate {
        to {
            --angle: 360deg;
        }
    }
 @property --angle { 
      syntax: '<angle>';
      initial-value: 0deg;
      inherits: false;
    } 
   
</style>
<body>
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark">

        <a href="" ><img src="https://harish141103.github.io/Quotesite/favicon/favicon.ico" alt="Logo"></a>

              <ul class="navbar-nav mr-auto"> 
                <li class="nav-item active">
                    <a class="navbar-brand" id="title" href="#">HappyHope QUOTESITE</a>
                </li>
              </ul>  
            <form class="form-inline my-2 my-lg-0">
                <input id="searchTxt" class="form-control mr-sm-2" type="search" placeholder="Search Quotes here..."
                    aria-label="Search">
                <button class="btn btn-outline-success my-2 my-sm-0" type="submit">Search Your Quotes</button>
            </form>
        </div>
    </nav>
    <div class="container my-3">
        <h2 class="text-center">Welcome to H4G Quotesite</h2>
        <div class="card">
            <div class="card-body">
                <h5 class="card-title">Lets Display Your Own Quote</h5>
                <div class="form-group">
                 <div class="gradient-border" id="box" >  
                  <textarea id="addTxt" class="form-control" rows="3" placeholder="Type Your Quotes By Your Wisdom"></textarea>
                </div>
                <button id="addBtn" class="btn btn-primary">Add Quote</button>
            </div>
        </div>
        <hr>
        <h2 class="text-center">Our Quotes</h2>
        <hr>
        <div id="notes" class="row container-fluid m-2">
        </div>
    </div>
   
   
    
<script>

  // Function to parse query parameters from the URL
  function getQueryParameters(url) {
      const params = new URLSearchParams(url);
      return params.get('user_name');
  }
  
  // Get the username from the iframe's parent window's URL
  const parentUrl = window.parent.location.search;
  const username = getQueryParameters(parentUrl);
  


showNotes();
let addBtn = document.getElementById("addBtn");
addBtn.addEventListener('click', function (e) {
  let addTxt = document.getElementById("addTxt");
  let notes = localStorage.getItem("notes");
  
  if (notes == null) {
    notesObj = [];
  } else {
    notesObj = JSON.parse(notes);
  }
  notesObj.push({text:addTxt.value,username: username});
  localStorage.setItem("notes", JSON.stringify(notesObj));
  addTxt.value = "";
  // console.log(notesObj);
  showNotes();
});

function showNotes() {
  let notes = localStorage.getItem("notes");
  if (notes == null) {
    notesObj = [];
  } else {
    notesObj = JSON.parse(notes);
  }
  let html = "";
  notesObj.forEach(function (element, index) {
    html += `<div class="card noteCard m-2" style="width: 18rem;">
              <div class="card-body">
                  <h2 class="card-title"> Quote${index+1}: </h2>
                  <p class="card-text"><h1> ${element.text} </h1></p>
                <p class="card-text"><h4>Entered by: ${element.username}</h4></p>
                <button id='${index}' onClick="deleteNote(this.id)" class="btn btn-primary">Delete Quote</button>
               </div>
             </div>`
  });


//---to display username as title---- <h2 class="card-title"> ${element.username}${index+1} </h2>

  let noteElm = document.getElementById("notes");
  if (notesObj.length!=null) {
    noteElm.innerHTML = html;
  }else{
    noteElm.innerHTML = 'No Quotes is there, Please add Quote....'; 
  }
}
//fuction to delete a note 
function deleteNote(index) {
  console.log('I am deleting a Quote', index);
  let notes = localStorage.getItem("notes");
  if (notes == null) {
    notesObj = [];
  } else {
    notesObj = JSON.parse(notes);
  }
  notesObj.splice(index,1);
  localStorage.setItem("notes", JSON.stringify(notesObj));
  showNotes();
}
//function to filter in search bar
let search = document.getElementById("searchTxt");
search.addEventListener('input', function() {
    let inputVal = search.value.toLowerCase();
    let noteCard = document.getElementsByClassName('noteCard');
    Array.from(noteCard).forEach(function(element) {
      let cardTitle=element.getElementsByTagName("h2")[0].innerText.toLowerCase();
      let cardTxt = element.getElementsByTagName("h1")[0].innerText.toLowerCase();
      let cardText = element.getElementsByTagName("h4")[0].innerText.toLowerCase();
      if (cardTitle.includes(inputVal) || cardTxt.includes(inputVal) || cardText.includes(inputVal)) {
        element.style.display ='block';
      } else {
        element.style.display ='none';
      }
    }); 
});
   
        </script> 

</body> 

 
 
</html> 

